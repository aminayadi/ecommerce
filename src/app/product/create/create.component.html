<div class="account-area mt-70 mb-70">
    <div class="container">
        <div class="row">
            <div class="col-lg-6">
              <form [formGroup]="productForm" >
                <div class="header">Product</div>
                <div>
                  <input class="input form-control" formControlName="name" type="text" placeholder="Enter product name..."/>
                  <div *ngIf="canShowError('name')">
                    <div class="error" *ngIf="hasError('name', 'required')">
                      product Name is required.
                    </div>
                  </div>
                </div>

                <div>
                  <input class="input form-control" formControlName="description" type="text" placeholder="Enter product description..."/>
                  <div *ngIf="canShowError('description')">
                    <div class="error" *ngIf="hasError('description', 'required')">
                      product description is required.
                    </div>
                  </div>
                </div>

                <div>
                  <input class="input form-control" formControlName="zone" type="text" placeholder="Enter product zone..."/>
                  <div *ngIf="canShowError('zone')">
                    <div class="error" *ngIf="hasError('zone', 'required')">
                      product zone is required.
                    </div>
                  </div>
                </div>


                <div>
                  <input class="input form-control" formControlName="price" type="number" placeholder="Enter product price..."/>
                  <div *ngIf="canShowError('price')">
                    <div class="error" *ngIf="hasError('price', 'required')">
                      product price is required.
                    </div>
                  </div>
                </div>


                <div>
                  <input class="input form-control" formControlName="discount" type="number" placeholder="Enter product discount..."/>
                
                </div>


                <div>
                  <select  formControlName="category" placeholder="select" (change)="fillFields($event)">
                    <option [ngValue]=""></option>
                    <option *ngFor="let catalog of categories" [ngValue]="catalog">{{catalog.name}}</option>
                  </select>
                </div>

              
                <ng-container formArrayName="pfields">
                  <ng-container *ngFor="let pfieldForm of pfields.controls; let i = index">
                      <div [formGroupName]="i">
                        <input id="value" type="text" formControlName="name" [readonly]="true"/> <br>
                          <input id="value" type="text" formControlName="value" />                
                      </div>
                  </ng-container>
              </ng-container>


             <!---JN Adding main image start--->
              
             <div class="row mb-3">
              <label class="form-label" for="field_photo"> Main Photo</label>
              <div>
                <img
                  [src]="'data:' +productForm.get('photoContentType')!.value + ';base64,' + productForm.get('photo')!.value"
                  style="max-height: 100px"
                  *ngIf="productForm.get('photo')!.value"
                  alt="product image"
                />
                <div *ngIf="productForm.get('photo')!.value" class="form-text text-danger clearfix">
                  <span class="pull-start">{{productForm.get('photoContentType')!.value }}, {{ byteSize(productForm.get('photo')!.value!) }}</span>
                  <!--button
                    type="button"
                    (click)="clearInputImage('photo', 'photoContentType', 'file_photo')"
                    class="btn btn-secondary btn-xs pull-end"
                  >
                    <fa-icon icon="times"></fa-icon>
                  </button-->
                </div>
                <input type="file" id="file_photo" data-cy="photo" (change)="setFileData($event, 'photo', true)" accept="image/*" />
              </div>
              <input type="hidden" class="form-control" name="photo" id="field_photo" data-cy="photo" formControlName="photo" />
              <input
                type="hidden"
                class="form-control"
                name="photoContentType"
                id="field_photoContentType"
                formControlName="photoContentType"
              />
            </div>
  



            <!---JN Adding main image ends--->






               <!--JN Adding upload images-->
         
               
              <app-upload-images (imageInfosChanged)="doSomethingWithCount($event)"></app-upload-images>

                <!--div class="form-group"-->
                  <button class="button tp-in-btn w-100"  type="button" (click)="submit()" >Save</button>
                <!--/div-->
              </form>
            </div>
          </div>
        </div>
      </div>
  
